var data2 = [{
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    },
    {
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    },
    {
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    },
    {
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    },
    {
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    },
    {
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    },
    {
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    },
    {
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    },
    {
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    },
    {
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    },
    {
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    },
    {
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    },
    {
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    },
    {
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    },
    {
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    },
    {
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    },
    {
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    },
    {
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    },
    {
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    },
    {
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    },
    {
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    },
    {
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    },
    {
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    },
    {
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    },
    {
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    },
    {
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    },
    {
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    },
    {
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    },
    {
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    },
    {
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    },
    {
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    },
    {
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    },
    {
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    },
    {
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    },
    {
        pos: "1",
        mat: "310092",
        Descripcion: "MULTICONECTOR C/VALV-TUERCA UNION INTEG",
        cant: "0",
        cantEnt: "500",
        um: "Pza",
        monto: "$23232,2323",
        precioNeto: "%3434",
        fecEnt: "11-04-2020",
        estatus: "activo",
    }
];

var data3 = [{
    docFactura: "2000107301",
    fecha: "12-05-2020",
    impNeto: "$626.68 MXP",
    Monto: "$626.68 MXP",
}, ];

var inpescIngreso = [{
        DocComercial: 9040471872,
        OrdenCompra: 1054023838,
        monto: "$24,681.00",
        creado: "01/04/2020",
        estatus: "Verificar SAC",
        estatusId: 3,
        destino: "Con. Suc. Periférico / Tablaje Castral 97210 Merida Sin distrito / colonia",
    },
    {
        DocComercial: 9008971874,
        OrdenCompra: 10345023858,
        monto: "$20,681.00",
        creado: "11/02/2020",
        estatus: "Concluido",
        estatusId: 2,
        destino: "Con. Suc. Periférico / Tablaje Castral 97210 Merida Sin distrito / colonia",
    },
    {
        DocComercial: 95471871,
        OrdenCompra: 100345818,
        monto: "$29,681.00",
        creado: "11/04/2020",
        estatus: "Pendiente",
        estatusId: 1,
        destino: "Con. Suc. Periférico / Tablaje Castral 97210 Merida Sin distrito / colonia",
    },
    {
        DocComercial: 93450071875,
        OrdenCompra: 1008923898,
        monto: "$22,681.00",
        creado: "11/02/2020",
        estatus: "Pendiente",
        estatusId: 1,
        destino: "Con. Suc. Periférico / Tablaje Castral 97210 Merida Sin distrito / colonia",
    },
    {
        DocComercial: 90056671873,
        OrdenCompra: 1007823858,
        monto: "$21,681.00",
        creado: "11/03/2020",
        estatus: "Verificar SAC",
        estatusId: 3,
        destino: "Con. Suc. Periférico / Tablaje Castral 97210 Merida Sin distrito / colonia",
    },
    {
        DocComercial: 9003571876,
        OrdenCompra: 1008923828,
        monto: "$25,681.00",
        creado: "11/01/2020",
        estatus: "Concluido",
        estatusId: 2,
        destino: "Con. Suc. Periférico / Tablaje Castral 97210 Merida Sin distrito / colonia",
    },
    {
        DocComercial: 9007201871,
        OrdenCompra: 100239818,
        monto: "$27,681.00",
        creado: "11/04/2020",
        estatus: "Verificar SAC",
        estatusId: 3,
        destino: "Con. Suc. Periférico / Tablaje Castral 97210 Merida Sin distrito / colonia",
    },
];

$(document).ready(function() {
    var $expampleDT = null;
    var expampleDTFunc = function(data) {
        $expampleDT = $("#example").DataTable({
            paging: true,
            searching: false,
            lengthChange: false,
            data: data,
            scrollY: true,
            "scrollX": true,

            columns: [
                { data: "DocComercial", class: "colorLetra", orderable: false },
                { data: "OrdenCompra", class: "colorLetra", orderable: false },
                { data: "monto", class: "colorLetra" },
                { data: "creado", class: "colorLetra" },
                { data: "estatus", class: "colorLetra" },
                { data: "destino", class: "colorLetra", width: '35%' },
            ],
            columnDefs: [{
                targets: -1,
                className: "dt-body-right",
            }, ],
            fnRowCallback: function(nRow, aData, iDisplayIndex, iDisplayIndexFull) {
                if (iDisplayIndex % 2 == 0) {
                    $("td", nRow).css("background-color", "#00afd7");
                } else {
                    $("td", nRow).css("background-color", "#ffff");
                }
            },
            initComplete: function(settings, json) {
                setTimeout(function() {
                    $($.fn.dataTable.tables(true)).DataTable().columns.adjust();
                }, 200);
            }
        });
    }

    expampleDTFunc(inpescIngreso);

    $("#example2").DataTable({
        paging: true,
        searching: false,
        lengthChange: false,
        data: data2,
        scrollY: true,
        "scrollX": true,
        columns: [
            { data: "pos", class: "colorLetra" },
            { data: "mat", class: "colorLetra" },
            { data: "Descripcion", class: "colorLetra" },
            { data: "cant", class: "colorLetra" },
            { data: "cantEnt", class: "colorLetra" },
            { data: "um", class: "colorLetra" },
            { data: "monto", class: "colorLetra" },
            { data: "precioNeto", class: "colorLetra" },
            { data: "fecEnt", class: "colorLetra" },
            { data: "estatus", class: "colorLetra" },
        ],
        columnDefs: [{
            targets: -1,
            className: "dt-body-right",
        }, ],
        fnRowCallback: function(nRow, aData, iDisplayIndex, iDisplayIndexFull) {
            if (iDisplayIndex % 2 == 0) {
                $("td", nRow).css("background-color", "#00afd7");
            } else {
                $("td", nRow).css("background-color", "#ffff");
            }
        },
    });

    $("#example3").DataTable({
        paging: true,
        searching: false,
        lengthChange: false,
        data: data3,
        scrollY: true,
        "scrollX": true,
        columns: [
            { data: "docFactura", class: "colorLetra" },
            { data: "fecha", class: "colorLetra" },
            { data: "impNeto", class: "colorLetra" },
            { data: "Monto", class: "colorLetra" },
        ],
        columnDefs: [{
            targets: -1,
            className: "dt-body-right",
        }, ],
        fnRowCallback: function(nRow, aData, iDisplayIndex, iDisplayIndexFull) {
            if (iDisplayIndex % 2 == 0) {
                $("td", nRow).css("background-color", "#00afd7");
            } else {
                $("td", nRow).css("background-color", "#ffff");
            }
        },
        initComplete: function(settings, json) {
            setTimeout(function() {
                $($.fn.dataTable.tables(true)).DataTable().columns.adjust();
            }, 200);
        },
    });

    var events = function() {
        $(window).off().on("resize", function() {
            setTimeout(function() {
                $($.fn.dataTable.tables(true)).DataTable().columns.adjust();
            }, 100);
        });

        $("tbody > tr .colorLetra").off().on("click", function() {
            $("#myModal").modal("toggle");
        });

        // Select all tabs
        $(".nav-tabs a").off().on('click', function() {
            debugger;
            $(this).tab("show");
            setTimeout(function() {
                $($.fn.dataTable.tables(true)).DataTable().columns.adjust();
            }, 200);
        });

        $("#setFilters").off().on('click', function(e) {
            var estatus = $("#select_estatus :selected").val(),
                fechaInicio = $("#date_start").val(),
                fechaFin = $("#date_end").val(),
                por = $("#select_por :selected").val();

            var filter = inpescIngreso.filter(function(a, b) {
                var convFecha = moment(a.creado, 'DD/MM/YYYY');
                return (!fechaInicio || convFecha >= moment(fechaInicio, 'DD/MM/YYYY')) &&
                    (!fechaFin || convFecha <= moment(fechaFin, 'DD/MM/YYYY')) &&
                    (!estatus || estatus == 0 || a.estatusId == estatus)
            });

            if (por) {
                switch (por) {
                    case '1':
                        filter.sort(function(a, e) {
                            return e.DocComercial - a.DocComercial;
                        });
                        break;
                    case '2':
                        filter.sort(function(a, e) {
                            return e.OrdenCompra - a.OrdenCompra;
                        });
                        break;
                    default:
                        break;
                }
            }

            if ($expampleDT) {
                $expampleDT.clear().destroy();
            }

            expampleDTFunc(filter);
            events();
        });
    };

    events();

    function Select2Languaje() {
        return {
            noResults: function() { return "No hay resultados" },
            searching: function() { return "Buscando..." },
            errorLoading: function() { return "No se pudieron cargar los resultados" },
            inputTooShort: function(e) {
                t = e.minimum - e.input.length, n = "Por favor, introduzca " + t + " car";
                return t == 1 ? n += "ácter" : n += "acteres", n
            }
        };
    }

    $('.dropdownActive').select2({
        theme: "bootstrap",
        allowClear: true,
        placeholder: "Seleccione una opción",
        language: Select2Languaje(),
        multiple: false,
        width: "100%",
    });

    $("div.date.date-start")
        .datepicker({
            format: "dd/mm/yyyy",
            weekStart: 0,
            maxViewMode: 2,
            todayBtn: "linked",
            language: "es",
            orientation: "bottom auto",
            daysOfWeekHighlighted: "0,6",
            autoclose: true,
            todayHighlight: true,
            startDate: moment("01/01/1900", "DD/MM/YYYY").format("DD/MM/YYYY"),
            endDate: moment(new Date(), "DD/MM/YYYY").format("DD/MM/YYYY"),
        }).off().on("changeDate", function(e) {
            var selectDate = moment(e.date).format("DD/MM/YYYY");
            $("div.date.date-end").datepicker("setStartDate", selectDate);
            $("div.date.date-end").datepicker("setDate", selectDate);
        });

    $("div.date.date-end").datepicker({
        format: "dd/mm/yyyy",
        weekStart: 0,
        maxViewMode: 2,
        todayBtn: "linked",
        language: "es",
        orientation: "bottom auto",
        daysOfWeekHighlighted: "0,6",
        autoclose: true,
        todayHighlight: true,
        startDate: "01/01/1900",
    });


});

// funcion timeline

var completes = document.querySelectorAll(".complete");

function toggleComplete() {
    var lastComplete = completes[completes.length - 1];
    lastComplete.classList.toggle("complete");
}